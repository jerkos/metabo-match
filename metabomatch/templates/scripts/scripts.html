{% extends theme("layout.html") %}
{% block css %}
    {{ super() }}
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/monokai.min.css">
    <style>
        .ace_scrollbar {
            display: none !important;
        }
    </style>
{% endblock %}

{% block content %}
    <p class="help-block"><strong>Help ?</strong><br/>You can provide here some piece of code you find useful and or refer a <strong>gist</strong> file from <a href="github.com">github</a>.
    For more complex scripts or example, we strongly encourage to use Gist and its versioning system.</p>
    <h3><i class="fa fa-code-fork text-muted"></i> # available scripts: {{ scripts | length }}</h3>
    <hr/>

    <h4>Search</h4>
    <form class="form-inline">
        <div class="form-group">
            <select class="form-control" id="exampleInputEmail2">
                <option>---</option>
                {% for s in softwares %}
                    <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <input type="text" class="form-control" id="exampleInputEmail2" placeholder="peak-picking, alignement...">
        </div>
        <button type="submit" class="btn btn-default">Filter</button>
    </form>
    <p class="help-block">You can search for scripts using <em>tags</em></p>

    <div class="row" style="padding: 20px 0 50px 0">

        <ul class="list-group">

            {% for script in scripts %}
                <li class="list-group-item">
                    <span class="badge">{{ script.up_votes }}</span>
                    <h5>
                        <a href="{{ url_for('user.profile', username=script.user.username)}}">{{ script.user.username }}</a>
                        /
                        <a href="{{ url_for('scripts.info', script_id=script.id) }}">{{ script.title }} </a>
                        <small><label class="label label-success">{{ script.creation_date | time_since }}</label></small><br/>
                        <small><strong>{{ script.programming_language }}</strong>, <strong>{{ script.software.name }}</strong></small><br/><br/>
                        <small>{{ script.description }}</small>
                    </h5>

                    <pre class="{{ script.programming_language | lower }}">
                                {{ script.preview_content() | join('\n')}}
                    </pre>
                </li>
            {% else %}
                <div class="well well-lg"><p class="text-center"><strong>No scripts found</strong></p></div>
            {% endfor %}
        </ul>

    </div>
    <hr/>
    <h3>You want to submit a piece of code ? <a class="btn btn-default" href="{{ url_for('scripts.register') }}">Register new script</a></h3>

{% endblock %}


{% block javascript %}
    {{ super() }}

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>
        $(document).ready(function() {
        $('pre').each(function(i, block) {
            hljs.highlightBlock(block);
        });
        });
        //hljs.initHighlightingOnLoad();
    </script>

{% endblock %}